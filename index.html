<!DOCTYPE html>
<html class="no-js" style="background-color: #1D1E26; color: azure;">

<head>
    <title>t-shirt</title>

    <meta property="og:image" content="/preview.png" />
    <meta property="og:image:secure_url" content="/preview.png" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:alt" content="t-shirt" />

    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <meta lang="it-IT">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0, minimal-ui" />

    <link rel="icon" type="image/svg"  href="mp-icon.svg">
    <meta name="theme-color" content="#ef2640" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;500;800&display=swap" rel="stylesheet">
    <!-- <link href="./index.css" rel="stylesheet"> -->
    <script>
        document.documentElement.className = 
           document.documentElement.className.replace("no-js","js");
    </script>
    <style>
        :root {
            font-family: sans-serif;
            --zoom: 1;
        }
        html {
            color: white;
            background-color: var(--color-bg, #1D1E26);
            user-select: none;
        }
        body {
            margin: 0;
            /* height: 100vh;
            width: 100vw; */
        }
        body, html {
            height: 100%;
            width: 100%;
            display: grid;
        }
        .controll {
            /* margin-top: clamp(2rem, (53rem - 100vh) * 3, 50vh); */
            margin-top: clamp(2rem, (35rem - 100vw) * 3, 50vh);
            margin-inline: clamp(.8rem, (100vw - 35rem), 1.8rem);

        }
        details {
            position: fixed;
            bottom: 0;
            width: clamp(16rem, 100%, 50rem);
            font-size: 3vw;
            font-size: 1rem;
            padding-bottom: 6rem;
            max-height: calc(100% - 6rem);
            overflow-y: auto;
        }
        details::-webkit-scrollbar {
            width: 4px;
        }
        /* details::-webkit-scrollbar-track {
        } */
        details::-webkit-scrollbar-thumb {
            background-color: #444444dc;
            /* box-shadow: inset 0 0 2px rgba(0, 0, 0, 0.3); */
            border-radius: 2px;
        }
        details[open] {
            background-color:  #1d1e2680;
        }
        summary {
            position: fixed;
            bottom: 0;
            left: 0;
            margin: 1.8rem 1.8rem;
            height: 3rem;
            max-height: 48px;
            line-height: 3rem;
            padding-left: calc(min(48px, 3rem) + 1rem);
            font-weight: bold;
            transition: all .23s ease-in-out;

            /* color: chartreuse; */
            filter: drop-shadow(
                1px 2px 8px hsl(258, 60%, 10%)
            );
            transform-origin: 24px center;
        }
        details[open] > summary {
            font-size: 0;
            transform: rotate(180deg);
        }
        details[open] summary ~ * {
            animation: sweep .35s ease-out;
        }

        @keyframes sweep {
            0%    {opacity: 0; transform: translateX(-100%);}
            100%  {opacity: 1; transform: translateX(0);}
        }
        summary::marker,
        summary::-webkit-details-marker {
            content: '';
            display: none;
        }
        summary::before {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 3rem;
            height: 3rem;
            max-width: 48px;
            max-height: 48px;
            z-index: 2;
            /* margin: 1.8rem; */
            border-radius: 50%;
            border: 0;
            background-repeat: no-repeat;
            background-size: 60%;
            background-position: center;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' height='24px' viewBox='0 0 24 24' width='24px' fill='%23ffffff'%3E%3Cpath d='M0 0h24v24H0V0z' fill='none'/%3E%3Cpath d='M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z'/%3E%3C/svg%3E");
            background-color: #3700B3;
            /* filter: drop-shadow(
                1px 2px 8px hsl(258, 60%, 10%)
            ); */
        }

        .controll select,
        .controll button,
        .controll input {
            /* height: 3em; */
            /* font-size: inherit; */
            margin: .3rem;
        }
        .controll > div {
            display: flex;
            flex-direction: column;
            margin-block: clamp(0px, (35rem - 100vw) * .5, 2.2rem);
        }
        .controll > div.row:not(.left) {
            flex-direction: row;
            /* justify-content: space-evenly; */
            flex-wrap: wrap;
        }
        .controll > div.row.left {
            flex-direction: row;
            align-items: center;
        }
        .controll .min > div {
            min-width: min-content;
            max-width: max-content;
            width: calc((100vw - 34rem) * 30);
        }
        .controll input[type="checkbox"] {
            width: 1.3em;
            height: 1.3em;
        }
        .controll input[type="text"] {
            width: 16ch;
        }
        .controll select,
        .controll input[type="text"] {
            height: 2.3em;
        }
        .controll button {
            height: 2.3em;
        }
        .controll label {
            margin-inline: .3em;
            margin-block: clamp(.1rem, .3em + 1%, .6rem);
        }

        .hide {
            display: none;
        }
        /* @media only screen and (max-width: 600px) {
            svg { 
                max-width: 100vw;
            }
        } */
        svg {
            /* width: clamp(100rem, 100%, 1266px); */
            /* width: clamp(9rem, 10vw + 20rem + var(--zoom, 0), 220.2rem) */
            /* width: clamp(350px, 75%, 800px);  */
            /* width: calc(var(--zoom, 1) * 99vw);
            height: calc(var(--zoom, 1) * 99vw);  */
            width: calc(var(--zoom, 1) * 210mm);
            height: calc(var(--zoom, 1) * 210mm);
            /* width: calc(1vw + 9vw); */
            /* max-width: 100vw; */
            opacity: 1;
            transition: opacity .3s ease-in;
        }
        .svg {
            width: fit-content;
            margin: auto;
        }
        body.open .svg {
            margin-right: 0;
        }
        body:not(.open) .svg {
            margin: auto;
        }

        svg > text,
        svg > a {
            display: none;
        }

        svg > path {
            stroke-width: 1mm;
        }

        #dpi {
            position: absolute;
            height: 1in;
            width: 1in;
            left: -100%;
            top: -100%;
        }
        #download-svg {
            position: fixed;
            /* position: absolute; */
            bottom: 0;
            right: 0;
            width: 3rem;
            height: 3rem;
            max-width: 48px;
            max-height: 48px;
            margin: 1.8rem;
            border-radius: 50%;
            border: 0;
            background-repeat: no-repeat;
            background-size: 60%;
            background-position: center;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' enable-background='new 0 0 24 24' height='24px' viewBox='0 0 24 24' width='24px' fill='%23ffffff'%3E%3Cg%3E%3Crect fill='none' height='24' width='24'/%3E%3C/g%3E%3Cg%3E%3Cpath d='M18,15v3H6v-3H4v3c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2v-3H18z M17,11l-1.41-1.41L13,12.17V4h-2v8.17L8.41,9.59L7,11l5,5 L17,11z'/%3E%3C/g%3E%3C/svg%3E");
            background-color: #3700B3;
            filter: drop-shadow(
                1px 2px 8px hsl(258, 60%, 10%)
            );
        }
        #download-svg:hover,
        summary:hover::before {
            transform: scale(1.03);
            background-size: 58%;

        }
        .no-js body *:not(noscript) {
            display: none;
        }
    </style>
    <!-- <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;400;500;700&display=swap" rel="stylesheet"> -->
</head>
<body>
    <noscript>
        This page works only with javascript. Turn it on or update your browser.
    </noscript>
    <div class="svg">
        <svg id="svg" width="1266" height="1266" viewBox="0 0 1266 1266" fill="none" xmlns="http://www.w3.org/2000/svg" style="opacity: 0;">
            <text x="1166" y="1166" text-anchor="end" fill="grey">
                    https://tag.morozov.page/mklogo/
                </text>
            <a href="https://tag.morozov.page/mklogo/">
                <text x="1166" y="1166" text-anchor="end" fill="blue" text-decoration="underline">
                    https://tag.morozov.page/mklogo/
                </text>
            </a>
            <g id="tag-logo" >
                <circle id="circle" cx="635" cy="614" r="574" fill="#C4C4C4"/>
                <path id="vector" d="M1001.64 500.528C935.149 500.528 879.619 548.253 867.448 611.248H778.96C791.843 499.655 886.596 413 1001.64 413C1044.62 413 1084.76 425.103 1118.87 446.074L1090.79 528.982C1090.79 528.982 1052.31 500.528 1001.64 500.528ZM148 513.03L179.71 422.959H510.024L478.314 513.03H148ZM482.056 852.792H583.402L725.115 422.959H623.867L482.056 852.792Z" fill="#F15B5A"/>
            </g>
        </svg>
        <div id="mockup"></div>
    </div>
    <details ontoggle="this.open ? this.parentNode.classList.add('open') : this.parentNode.classList.remove('open') ">
        <summary>
            SETTINGS 
        </summary>
        <div class="controll">
            <div>
                <label for="zoom">Zoom: <span id="dpi-label"></span>  <output>100%</output></label>
                <input type="range" min="0.25" max="10" value="1" step=".25" id="zoom" oninput="input(this)">
            </div>
            <div class="row min">
                <div>
                    <input type="color" id="color-bg" name="color-bg" value="#e66465" oninput="input(this)">
                    <label for="color-bg">BG</label>
                </div>
                <div>
                    <input type="color" id="color-lines" name="color-lines" value="#f6b73c" oninput="input(this)">
                    <label for="color-lines">Lines</label>
                </div>
                <div>
                    <input type="color" id="color-tshirt" name="color-tshirt" value="#f6b73c" oninput="input(this)">
                    <label for="color-tshirt">T-Shirt</label>
                </div>
                <div>
                    <input type="color" id="color-sleeves" name="color-sleeves" value="#f6b73c" oninput="input(this)">
                    <label for="color-sleeves">Sleeves</label>
                </div>
                <div>
                    <input type="color" id="color-stitches" name="color-stitches" value="#f6b73c" oninput="input(this)">
                    <label for="color-stitches">Stitches</label>
                </div>
                <div>
                    <input type="color" id="color-label" name="color-label" value="#f6b73c" oninput="input(this)">
                    <label for="color-label">Label</label>
                </div>
            </div>
            <div class="row left">
                <label for="logo">Show TAG background:</label>
                <input type="checkbox" id="logo" checked oninput="input(this)">
                <label for="logobg">with circle:</label>
                <input type="checkbox" id="logobg" checked oninput="input(this)">
            </div>
            <div class="row left">
                <label for="isSin">Add sine wave:</label>
                <input type="checkbox" id="isSin" checked oninput="input(this)">
            </div>
            <div>
                <label for="step-x">Step X: <output></output></label>
                <input type="range" min="1" max="100" value="3" step="1" id="step-x" oninput="input(this)">
            </div>
            <div>
                <label for="step-y">Step Y: <output></output></label>
                <input type="range" min="1" max="100" value="5" step="1" id="step-y" oninput="input(this)">
            </div>
            <div>
                <label for="noise-0">Wave 0: <output></output></label>
                <input type="range" min="-30" max="30" value="1" step=".05" id="noise-0" oninput="input(this)">
            </div>
            <div>
                <label for="noise-1">Wave 1: <output></output></label>
                <input type="range" min="-30" max="30" value="2" step=".05" id="noise-1" oninput="input(this)">
            </div>
            <div>
                <label for="faseK">Fase shift coefficient: <output></output></label>
                <input type="range" min="-1" max="1" value="0" step=".005" id="faseK" oninput="input(this)">
            </div>
            <div>
                <label for="bezier-smoothing">Bezier smoothing: <output></output></label>
                <input type="range" min="-10" max="20" value="0.1" step=".05" id="bezier-smoothing" oninput="input(this)">
            </div>
            <div>
                <label for="stroke">Line stroke (mm): <output></output></label>
                <input type="range" min="0.05" max="10" value="0.8" step=".05" id="stroke" oninput="input(this)">
            </div>
            <div class="row left">
                <label for="random-algo">Random algorithm:</label>
                <select name="random-algo" id="random-algo" oninput="input(this)">
                    <option value="0">off</option>
                    <option value="1">sfc32</option>
                    <option value="2">jsf32</option>
                    <option value="3">xoshiro128ss</option>
                    <option value="4">mulberry32</option>
                </select>
            </div>
            <div class="row left">
                <label for="random-to">Random behaviour:</label>
                <select name="random-to" id="random-to" oninput="input(this)">
                    <option value="0">option 1</option>
                    <option value="1">option 2</option>
                    <option value="2">option 3</option>
                    <option value="3">option 4</option>
                    <option value="4">option 5</option>
                </select>
            </div>
            <div class="row left">
                <label for="random-seed">Random seed:</label>
                <input type="text" id="random-seed" value="TAG-2022" oninput="input(this)"><button
                    id="gen-random-seed" 
                    onclick="this.previousSibling.value = Math.random().toString(36).slice(2); this.previousSibling.oninput(this.previousSibling);">Generate</button>
            </div>
        </div>
    </details>
    <button id="download-svg" onclick="downloadSvgAll()"></button>
    <div id="dpi"></div>
    <script src="index.js" async></script>
    <script>
        async function download(filename, text) {
            const element = document.createElement('a');
            const uriText = await encodeURIComponent(text)
            element.setAttribute('href', 'data:text/plain;charset=utf-8,' + uriText);
            element.setAttribute('download', filename);
        
            element.style.display = 'none';
            document.body.appendChild(element);
        
            element.click();
        
            document.body.removeChild(element);
            return uriText
        }

        const downloadSvg = async (svg=document.querySelector('svg')) => {
            const svgLink = document.querySelector('svg > a')
            svgLink.style = ''
            return download(`t-shirt-logo-${Date.now()}.svg`,svg.outerHTML)
        }

        const downloadSvgAll = (svgs=document.querySelectorAll('svg')) => {
            const time = Date.now()
            svgs.forEach(svg=>{
                if (svg.id == 'mockup') {
                    const what = document.querySelector('#svg')
                    svg.querySelector('defs').appendChild(what)
                    download(`t-shirt-logo-${time}-mockup.svg`,svg.outerHTML)
                    return;
                }
                download(`t-shirt-logo-${time}.svg`,svg.outerHTML)
            })
        }

        document.querySelector('span#dpi-label').innerText = `(dpi=${document.getElementById("dpi").offsetWidth})`
        
    </script>
</body>
</html>